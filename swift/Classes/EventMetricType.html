<!DOCTYPE html>
<html lang="en">
  <head>
    <title>EventMetricType Class Reference</title>
    <link rel="stylesheet" type="text/css" href="../css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="../css/highlight.css" />
    <meta charset='utf-8'>
    <script src="../js/jquery.min.js" defer></script>
    <script src="../js/jazzy.js" defer></script>
    
    <script src="../js/lunr.min.js" defer></script>
    <script src="../js/typeahead.jquery.js" defer></script>
    <script src="../js/jazzy.search.js" defer></script>
  </head>
  <body>
    <a name="//apple_ref/swift/Class/EventMetricType" class="dashAnchor"></a>
    <a title="EventMetricType Class Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="../index.html">Glean Docs</a> (97% documented)</p>
        <p class="header-right"><a href="https://github.com/mozilla/glean"><img src="../img/gh.png" alt="GitHub"/>View on GitHub</a></p>
        <div class="header-right">
          <form role="search" action="../search.json">
            <input type="text" placeholder="Search documentation" data-typeahead>
          </form>
        </div>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="../index.html">Glean Reference</a>
        <img id="carat" src="../img/carat.png" alt=""/>
        EventMetricType Class Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="../Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Classes/BooleanMetricType.html">BooleanMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/CounterMetricType.html">CounterMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/DatetimeMetricType.html">DatetimeMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/DistributionData.html">DistributionData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/EventMetricType.html">EventMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Glean.html">Glean</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/HttpPingUploader.html">HttpPingUploader</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/JweMetricType.html">JweMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/LabeledMetricType.html">LabeledMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/MemoryDistributionMetricType.html">MemoryDistributionMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/NoExtras.html">NoExtras</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/Ping.html">Ping</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/PingBase.html">PingBase</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/QuantityMetricType.html">QuantityMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StringListMetricType.html">StringListMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/StringMetricType.html">StringMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/TimespanMetricType.html">TimespanMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/TimingDistributionMetricType.html">TimingDistributionMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/UrlMetricType.html">UrlMetricType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Classes/UuidMetricType.html">UuidMetricType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Enums/ErrorType.html">ErrorType</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums.html#/s:5Glean0A7MetricsO">GleanMetrics</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/Lifetime.html">Lifetime</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/MemoryUnit.html">MemoryUnit</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/NoExtraKeys.html">NoExtraKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/NoReasonCodes.html">NoReasonCodes</a>
              </li>
              <li class="nav-group-task">
                <a href="../Enums/TimeUnit.html">TimeUnit</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Extensions/Dictionary.html">Dictionary</a>
              </li>
              <li class="nav-group-task">
                <a href="../Extensions/String.html">String</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Protocols/EventExtras.html">EventExtras</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/ExtraKeys.html">ExtraKeys</a>
              </li>
              <li class="nav-group-task">
                <a href="../Protocols/ReasonCodes.html">ReasonCodes</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Structs/BuildInfo.html">BuildInfo</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/Configuration.html">Configuration</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs.html#/s:5Glean7JweDataV">JweData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs/RecordedEventData.html">RecordedEventData</a>
              </li>
              <li class="nav-group-task">
                <a href="../Structs.html#/s:5Glean22RecordedExperimentDataV">RecordedExperimentData</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="../Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="../Typealiases.html#/s:5Glean0A7TimerIda">GleanTimerId</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            <h1>EventMetricType</h1>
              <div class="declaration">
                <div class="language">
                  
                  <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">class</span> <span class="kt">EventMetricType</span><span class="o">&lt;</span><span class="kt">ExtraKeysEnum</span><span class="p">,</span> <span class="kt">ExtraObject</span><span class="o">&gt;</span> <span class="k">where</span> <span class="kt">ExtraKeysEnum</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/ExtraKeys.html">ExtraKeys</a></span><span class="p">,</span> <span class="kt">ExtraObject</span> <span class="p">:</span> <span class="kt"><a href="../Protocols/EventExtras.html">EventExtras</a></span></code></pre>

                </div>
              </div>
            <p>This implements the developer facing API for recording events.</p>

<p>Instances of this class type are automatically generated by the parsers at built time,
allowing developers to record events that were previously registered in the metrics.yaml file.</p>

<p>The Events API only exposes the <code><a href="../Classes/EventMetricType.html#/s:5Glean15EventMetricTypeC6record5extraySDyxSSG_tF">EventMetricType.record(extra:)</a></code> method, which takes care of validating the input
data and making sure that limits are enforced.</p>

          </section>
          <section class="section task-group-section">
            <div class="task-group">
              <ul>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:5Glean15EventMetricTypeC8category4name11sendInPings8lifetime8disabled16allowedExtraKeysACyxq_GSS_SSSaySSGAA8LifetimeOSbAKSgtcfc"></a>
                    <a name="//apple_ref/swift/Method/init(category:name:sendInPings:lifetime:disabled:allowedExtraKeys:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:5Glean15EventMetricTypeC8category4name11sendInPings8lifetime8disabled16allowedExtraKeysACyxq_GSS_SSSaySSGAA8LifetimeOSbAKSgtcfc">init(category:<wbr>name:<wbr>sendInPings:<wbr>lifetime:<wbr>disabled:<wbr>allowedExtraKeys:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>The public constructor used by automatically generated metrics.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="nf">init</span><span class="p">(</span>
    <span class="nv">category</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
    <span class="nv">name</span><span class="p">:</span> <span class="kt">String</span><span class="p">,</span>
    <span class="nv">sendInPings</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">],</span>
    <span class="nv">lifetime</span><span class="p">:</span> <span class="kt"><a href="../Enums/Lifetime.html">Lifetime</a></span><span class="p">,</span>
    <span class="nv">disabled</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">,</span>
    <span class="nv">allowedExtraKeys</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">]?</span> <span class="o">=</span> <span class="kc">nil</span>
<span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:5Glean15EventMetricTypeC6record5extraySDyxSSG_tF"></a>
                    <a name="//apple_ref/swift/Method/record(extra:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:5Glean15EventMetricTypeC6record5extraySDyxSSG_tF">record(extra:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Record an event by using the information provided by the instance of this class.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">@available(*, deprecated, message: "Specify types for your event extras. See the reference for details.")</span>
<span class="kd">public</span> <span class="kd">func</span> <span class="nf">record</span><span class="p">(</span><span class="nv">extra</span><span class="p">:</span> <span class="p">[</span><span class="kt">ExtraKeysEnum</span> <span class="p">:</span> <span class="kt">String</span><span class="p">])</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>extra</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>(optional) A map of extra keys. Keys are identiifers and mapped to their registered name,
     values need to be strings.
     This is used for events where additional richer context is needed.
     The maximum length for values is defined by <code>MAX_LENGTH_EXTRA_KEY_VALUE</code>.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:5Glean15EventMetricTypeC6recordyyq_SgF"></a>
                    <a name="//apple_ref/swift/Method/record(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:5Glean15EventMetricTypeC6recordyyq_SgF">record(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Undocumented</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">record</span><span class="p">(</span><span class="n">_</span> <span class="nv">properties</span><span class="p">:</span> <span class="kt">ExtraObject</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span></code></pre>

                        </div>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:5Glean15EventMetricTypeC12testHasValueySbSSSgF"></a>
                    <a name="//apple_ref/swift/Method/testHasValue(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:5Glean15EventMetricTypeC12testHasValueySbSSSgF">testHasValue(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Tests whether a value is stored for the metric for testing purposes only. This function will
attempt to await the last task (if any) writing to the the metric&rsquo;s storage engine before
returning a value.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">testHasValue</span><span class="p">(</span><span class="n">_</span> <span class="nv">pingName</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Bool</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>pingName</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>represents the name of the ping to retrieve the metric for.
        Defaults to the first value in <code>sendInPings</code>.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>true if metric value exists, otherwise false</p>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:5Glean15EventMetricTypeC12testGetValueySayAA08RecordedB4DataVGSSSgKF"></a>
                    <a name="//apple_ref/swift/Method/testGetValue(_:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:5Glean15EventMetricTypeC12testGetValueySayAA08RecordedB4DataVGSSSgKF">testGetValue(_:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns the stored value for testing purposes only. This function will attempt to await the
last task (if any) writing to the the metric&rsquo;s storage engine before returning a value.</p>

<p>Throws a &ldquo;Missing value&rdquo; exception if no value is stored</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">testGetValue</span><span class="p">(</span><span class="n">_</span> <span class="nv">pingName</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span> <span class="k">throws</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="kt"><a href="../Structs/RecordedEventData.html">RecordedEventData</a></span><span class="p">]</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>pingName</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>represents the name of the ping to retrieve the metric for.
        Defaults to the first value in <code>sendInPings</code>.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>value of the stored metric</p>
                      </div>
                    </section>
                  </div>
                </li>
                <li class="item">
                  <div>
                    <code>
                    <a name="/s:5Glean15EventMetricTypeC24testGetNumRecordedErrors_8pingNames5Int32VAA05ErrorD0O_SSSgtF"></a>
                    <a name="//apple_ref/swift/Method/testGetNumRecordedErrors(_:pingName:)" class="dashAnchor"></a>
                    <a class="token" href="#/s:5Glean15EventMetricTypeC24testGetNumRecordedErrors_8pingNames5Int32VAA05ErrorD0O_SSSgtF">testGetNumRecordedErrors(_:<wbr>pingName:<wbr>)</a>
                    </code>
                  </div>
                  <div class="height-container">
                    <div class="pointer-container"></div>
                    <section class="section">
                      <div class="pointer"></div>
                      <div class="abstract">
                        <p>Returns the number of errors recorded for the given metric.</p>

                      </div>
                      <div class="declaration">
                        <h4>Declaration</h4>
                        <div class="language">
                          <p class="aside-title">Swift</p>
                          <pre class="highlight swift"><code><span class="kd">public</span> <span class="kd">func</span> <span class="nf">testGetNumRecordedErrors</span><span class="p">(</span><span class="n">_</span> <span class="nv">errorType</span><span class="p">:</span> <span class="kt"><a href="../Enums/ErrorType.html">ErrorType</a></span><span class="p">,</span> <span class="nv">pingName</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Int32</span></code></pre>

                        </div>
                      </div>
                      <div>
                        <h4>Parameters</h4>
                        <table class="graybox">
                          <tbody>
                            <tr>
                              <td>
                                <code>
                                <em>errorType</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>The type of error recorded.</p>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <td>
                                <code>
                                <em>pingName</em>
                                </code>
                              </td>
                              <td>
                                <div>
                                  <p>represents the name of the ping to retrieve the metric for.
        Defaults to the first value in <code>sendInPings</code>.</p>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div>
                        <h4>Return Value</h4>
                        <p>The number of errors recorded for the metric for the given error type.</p>
                      </div>
                    </section>
                  </div>
                </li>
              </ul>
            </div>
          </section>
        </section>
        <section id="footer">
          <p>&copy; 2022 <a class="link" href="https://mozilla.github.com/glean" target="_blank" rel="external noopener"></a>. All rights reserved. (Last updated: 2022-01-26)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫ v0.14.1</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external noopener">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</html>
